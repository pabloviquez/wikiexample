Wiki=window.Wiki||{};Wiki.Donations=(function(){var _dollarAmounts=[];var _init=function(){loadCurrencies();$("#donations > button").each(function(i){_dollarAmounts[i]=$(this).text();});$("#currencySelector").change(function(){updateDonationButtons();});$("#donations > button").click(function(){amount=$(this).text();alert("Thank you for your "+amount+" donation!");});};var loadCurrencies=function(){$.get("ajax/currencies.php",function(data){dropdown=$("#currencySelector");$.each(data,function(item){dropdown.append($("<option />").val(data[item]).text(data[item]));});},"json");};var updateDonationButtons=function(){var currency=$("#currencySelector").val();if(currency==="USD"){$("#donations > button").each(function(i){$(this).text(_dollarAmounts[i]);});return;}$.get("ajax/conversions.php",{"currency":currency,"data":_dollarAmounts.join(":")},function(data){$("#donations > button").each(function(i){$(this).text(data[i]);});});};return{init:_init};})();$(Wiki.Donations.init());
